%Use Lualatex for interpretation!
% lualatex -interaction=nonstopmode --shell-escape DeveloperDocumentation.tex

%You have to have those fonts in your system:
% - Calibri (standard windows font)
% - Trebuchet MS (standard windows font)
% - GROTESKIA (http://www.dafont.com/groteskia.font)

\documentclass[12pt,a4paper]{report}

\newcommand*{\DEVDOC}

%\usepackage[utf8]{inputenc} % for old latex interpreters
%\usepackage[english]{babel}

\usepackage{polyglossia}
\setdefaultlanguage[variant=american]{english} % or ?british
\setotherlanguage{czech}

\usepackage{url}
\usepackage{geometry}
\usepackage[cmyk]{xcolor}
\usepackage{amsmath}
\usepackage[some]{background}
\usepackage{listings}
\usepackage[stable]{footmisc}
\usepackage{titlesec}
\usepackage{fontspec}
\usepackage{epstopdf,epsfig} 


\definecolor{TextanDarkRed}{cmyk}{.37,.94,.83,.59}
\definecolor{TextanRed}{cmyk}{.0,.879,.844,.220}
\definecolor{javagreen}{rgb}{0.25,0.5,0.35}

\newfontfamily\chapterfont{GROTESKIA}
\newfontfamily\sectionfont{Trebuchet MS}

\titleformat{\chapter}{\chapterfont\fontsize{36pt}{1pt}\selectfont\color{TextanRed}}
  {\thechapter}{20pt}{\chapterfont\fontsize{36pt}{1pt}\selectfont\MakeUppercase}
\titlespacing{\chapter}{0pt}{0pt}{20pt}
\titleformat*{\section}{\LARGE\sectionfont\color{TextanDarkRed}}
\titleformat*{\subsection}{\fontsize{14pt}{1pt}\selectfont\sectionfont\itshape\color{TextanDarkRed}}
%\titleformat*{\subsubsection}{\sectionfont\color{TextanDarkRed}}

\setmainfont{Calibri}

\backgroundsetup{
scale=1,
angle=0,
opacity=1,
contents={
\begin{tikzpicture}[remember picture,overlay]
  \path [fill=TextanDarkRed] (-0.5\paperwidth,-0.5\paperheight)rectangle (-0.37\paperwidth,0.5\paperheight);
 \end{tikzpicture}}
}

\usepackage{xr-hyper}
\usepackage[unicode,colorlinks=true]{hyperref}
\hypersetup{pdftitle=TextAn - user documentation}
\hypersetup{pdfauthor={Petr Fanta, Duc Tam Hoang, Adam Huječek, Václav Pernička, Jakub Vlček}}
\hypersetup{linkcolor=black, citecolor=black, urlcolor=black, filecolor=black}
\externaldocument[USR-]{../UserDocumentation/UserDocumentation}[../UserDocumentation/UserDocumentation.pdf]

\def\chapwithtoc#1{
\chapter*{#1}
\addcontentsline{toc}{chapter}{#1}
}

% sets numbering for subsubsection
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\lstdefinelanguage{properties}{% new language for listings
  basicstyle=\ttfamily,
  sensitive=false,
  morecomment=[l]{\#},      % comment
  morestring=[b]",          % string def
  commentstyle=\color{javagreen},
  basicstyle=\small
}

%Comment macro
%Usage:
% \comment[_assignee_]{_author_}{_comment_}
% \comment{_author_}{_comment_}
\makeatletter
\newcommand{\comment}[3][\@empty]{
  {\color{magenta}[#3 - }
  {\color{green}\ifx\@empty#1\relax Author: #2 \else Assignee: #1; Author: #2\fi}{\color{magenta}]}
}
\makeatother

\newcommand{\textan}{\emph{Text\-An}}

\begin{document}

\begin{titlepage}
\BgThispage
\newgeometry{left=4.5cm,top=7cm,bottom=3cm}

\begin{figure}
 \includegraphics{../Logos/TEXTAN_logo_grey_B}
\end{figure}
\noindent
\textcolor{TextanRed}{\chapterfont\fontsize{48pt}{1pt}\selectfont\MakeUppercase{Developer documentation}}\\[15pt]
\textcolor{TextanDarkRed}{\sectionfont\LARGE\MakeUppercase{Version 0.1}}

\vfill
\noindent
\begin{minipage}[b]{.75\textwidth}
\textbf{Authors}\\
Petr Fanta\\
Duc Tam Hoang\\
Adam Huječek\\
Václav Pernička\\
Jakub Vlček
\end{minipage}% This must go next to `\end{minipage}`
\begin{minipage}[b]{.25\textwidth}
\textbf{Supervisor} \\
Ondřej Bojar\\
%\vfill
\\
\\
\textbf{Date}\\
\today
\end{minipage}

\end{titlepage}
\restoregeometry

\pagenumbering{roman}
\tableofcontents

%\setlength{\parskip}{1em}
%\chapter*{Intro}
%\addcontentsline{toc}{chapter}{Intro}


\chapter{Introduction}
\pagenumbering{arabic}

\section{Introduction to the Project}
\input{Sections/IntroductionToTheProject}

%\section{Conventions}

\section{Glossary}
\input{../UserDocumentation/Sections/Glossary}

\chapter{Requirements Specification}
\comment{Petr}{If we need to make the documentation longer, include the whole specification}
\input{Sections/Requirements}

\comment{Petr}{where to place use cases etc?}

\comment{Adam}{I will place use case etc. here for now...}

\comment[Petr]{Petr}{Merge two use cases into one}

\begin{figure}[!htb]
        \centering
        \includegraphics[width=\textwidth]{Images/UseCase1}
        \caption{Use case of the end-user.}
        \label{fig:UseCase1}
\end{figure}

\begin{figure}[!htb]
        \centering
        \includegraphics[width=\textwidth]{Images/UseCase2}
        \caption{Use case of the client.}
        \label{fig:UseCase2}
\end{figure}

\chapter{Analysis}

\comment{Ondrej}{Add at least one sentence describing the contents of the
chapter}

\section{Related Work}
\input{Sections/RelatedWork}

\section{Third Party Tools}
\input{Sections/AdoptedSolutions}

\section{Decisions}
\label{sec:Decisions}

\comment{Petr}{After all, I think it's better to have only one "decisions" which
will contains both decisions about used libraries and architecture.}

\comment[Venca]{Petr}{\huge{Write all database related decisions!}}

\comment{Adam}{This section must contain the following:
1) why pipeline? maybe also mockups here
2) why (semi)automatic processing?
3) why state on client?}

\chapter{Overall Architecture}
\section{Architecture Overview}
\input{Sections/Architecture}

\chapter{Server}
\input{Sections/ServerArchitecture}

\chapter{Client}
\input{Sections/ClientArchitecture}

%\input{Sections/Architecture}


\chapter{Possible Future Extensions}
\input{Sections/FutureExtensions}

\chapter{Developer Notes}
\section{Work on the Project}
\input{Sections/WorkOnProject}

\section{Lessons Learned}
\comment[all]{Adam}{Add your experience with the project}

\appendix
\chapter{Contents of the Attached DVD}

\comment{Petr}{Change appendices from chapter to section?}

\comment{Petr}{Github, DVD}

\chapter{Documentation for Java Sources}
Documentation for Java sources is not a part of this printout, but can be found
in attached DVD in folder Javadoc.

\chapter{Client Properties}
\input{Sections/ClientProperties}
\label{app:ClientProperties}


\end{document}
